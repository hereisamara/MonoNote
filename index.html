<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MonoNote - Your Personal Notes</title>
    <meta name="description" content="A minimal monochrome note-taking app with markdown, voice memos, and AI features">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Marked.js for markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üìù</span>
                    <span class="logo-text">MonoNote</span>
                </div>
            </div>

            <!-- New buttons -->
            <div class="sidebar-actions">
                <button class="action-btn" id="newPageBtn">
                    <span class="icon">+</span>
                    <span>New Page</span>
                </button>
                <button class="action-btn secondary" id="newFolderBtn">
                    <span class="icon">üìÅ</span>
                    <span>New Folder</span>
                </button>
            </div>

            <!-- Search -->
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="Search pages...">
            </div>

            <!-- Folder and page tree -->
            <nav class="nav-tree" id="navTree">
                <!-- Dynamically populated -->
            </nav>
        </aside>

        <!-- Main content -->
        <main class="main-content">
            <!-- Top bar -->
            <header class="top-bar">
                <div class="breadcrumb" id="breadcrumb">
                    <!-- Dynamically populated -->
                </div>
                <div class="top-bar-actions">
                    <button class="icon-btn" id="llmSettingsBtn" title="AI Settings">‚öô</button>
                    <button class="icon-btn" id="themeToggleBtn" title="Toggle Theme">‚óê</button>
                    <button class="icon-btn" id="toggleSidebarBtn" title="Toggle Sidebar">‚ò∞</button>
                </div>
            </header>

            <!-- Editor area -->
            <div class="editor-container" id="editorContainer">
                <!-- Welcome screen -->
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-content">
                        <h1>Welcome to NotionLite</h1>
                        <p>Create a new page or select an existing one to get started.</p>
                        <button class="primary-btn" id="welcomeNewPageBtn">Create Your First Page</button>
                    </div>
                </div>

                <!-- Editor (hidden by default) -->
                <div class="editor-wrapper hidden" id="editorWrapper">
                    <!-- Page header with title and actions -->
                    <div class="page-header">
                        <input type="text" class="page-title-input" id="pageTitleInput" placeholder="Untitled">
                        <button class="ai-actions-btn" id="aiActionsBtn" title="AI Actions">
                            <span>‚ú®</span> AI Actions
                        </button>
                    </div>

                    <!-- Voice memo section -->
                    <div class="voice-section">
                        <div class="voice-controls">
                            <select class="language-select" id="languageSelect">
                                <option value="en-US">English (US)</option>
                                <option value="en-GB">English (UK)</option>
                                <option value="es-ES">Spanish</option>
                                <option value="fr-FR">French</option>
                                <option value="de-DE">German</option>
                                <option value="it-IT">Italian</option>
                                <option value="pt-BR">Portuguese (Brazil)</option>
                                <option value="zh-CN">Chinese (Simplified)</option>
                                <option value="zh-TW">Chinese (Traditional)</option>
                                <option value="ja-JP">Japanese</option>
                                <option value="ko-KR">Korean</option>
                                <option value="ru-RU">Russian</option>
                                <option value="ar-SA">Arabic</option>
                                <option value="hi-IN">Hindi</option>
                                <option value="th-TH">Thai</option>
                                <option value="vi-VN">Vietnamese</option>
                                <option value="my-MM">Myanmar (Burmese)</option>
                            </select>
                            <button class="voice-btn" id="recordBtn" title="Record Voice Memo">
                                <span class="record-icon">üé§</span>
                                <span class="record-text">Record</span>
                            </button>
                            <button class="voice-btn stop hidden" id="stopBtn" title="Stop Recording">
                                <span class="stop-icon">‚èπ</span>
                                <span class="stop-text">Stop</span>
                            </button>
                        </div>
                        <div class="recording-indicator hidden" id="recordingIndicator">
                            <span class="pulse"></span>
                            <span>Recording...</span>
                        </div>
                        <div class="transcript-preview hidden" id="transcriptPreview">
                            <p id="transcriptText"></p>
                            <div class="transcript-actions">
                                <button class="small-btn" id="insertTranscriptBtn">Insert into Editor</button>
                                <button class="small-btn secondary" id="discardTranscriptBtn">Discard</button>
                            </div>
                        </div>
                    </div>

                    <!-- Voice memos list -->
                    <div class="voice-memos-list hidden" id="voiceMemosList">
                        <h4>Voice Memos</h4>
                        <div id="memosContainer"></div>
                    </div>

                    <!-- Notion-like Block Editor -->
                    <div class="block-editor" id="blockEditor">
                        <!-- Blocks will be dynamically added here -->
                    </div>

                    <!-- Hidden textarea to store raw content -->
                    <textarea class="hidden-content" id="hiddenContent" style="display:none;"></textarea>

                    <!-- Backlinks section -->
                    <div class="backlinks-section" id="backlinksSection">
                        <h4>Backlinks</h4>
                        <div class="backlinks-list" id="backlinksList">
                            <!-- Dynamically populated -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Context menu -->
    <div class="context-menu hidden" id="contextMenu">
        <button class="context-item" data-action="rename">‚úèÔ∏è Rename</button>
        <button class="context-item" data-action="move">üìÇ Move to...</button>
        <button class="context-item danger" data-action="delete">üóëÔ∏è Delete</button>
    </div>

    <!-- Move modal -->
    <div class="modal hidden" id="moveModal">
        <div class="modal-content">
            <h3>Move to Folder</h3>
            <div class="folder-select-list" id="folderSelectList"></div>
            <div class="modal-actions">
                <button class="small-btn secondary" id="cancelMoveBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Input modal (for creating/renaming) -->
    <div class="modal hidden" id="inputModal">
        <div class="modal-content">
            <h3 id="inputModalTitle">Enter Name</h3>
            <input type="text" class="modal-input" id="modalInput" placeholder="Enter name...">
            <div class="modal-actions">
                <button class="small-btn secondary" id="cancelInputBtn">Cancel</button>
                <button class="small-btn" id="confirmInputBtn">Create</button>
            </div>
        </div>
    </div>

    <!-- Confirm modal (for delete) -->
    <div class="modal hidden" id="confirmModal">
        <div class="modal-content">
            <h3 id="confirmModalTitle">Confirm</h3>
            <p id="confirmModalMessage">Are you sure?</p>
            <div class="modal-actions">
                <button class="small-btn secondary" id="cancelConfirmBtn">Cancel</button>
                <button class="small-btn danger-btn" id="confirmActionBtn">Delete</button>
            </div>
        </div>
    </div>

    <!-- LLM Settings Modal -->
    <div class="modal hidden" id="llmSettingsModal">
        <div class="modal-content">
            <h3>AI Settings</h3>
            <div class="settings-group">
                <label for="llmProviderSelect">Provider</label>
                <select id="llmProviderSelect" class="settings-select">
                    <option value="openai">OpenAI (GPT-3.5)</option>
                    <option value="gemini">Google Gemini</option>
                    <option value="anthropic">Anthropic Claude</option>
                </select>
            </div>
            <div class="settings-group">
                <label for="llmApiKeyInput">API Key</label>
                <input type="password" id="llmApiKeyInput" class="modal-input" placeholder="Enter your API key...">
            </div>
            <p class="settings-hint">Your API key is stored locally in your browser.</p>
            <div class="modal-actions">
                <button class="small-btn secondary" id="cancelLLMSettingsBtn">Cancel</button>
                <button class="small-btn" id="saveLLMSettingsBtn">Save</button>
            </div>
        </div>
    </div>

    <!-- AI Loading Overlay -->
    <div class="ai-loading-overlay hidden" id="aiLoadingOverlay">
        <div class="ai-loading-content">
            <div class="ai-loading-spinner"></div>
            <p class="ai-loading-text">AI is thinking...</p>
            <p class="ai-loading-subtext">This may take a few seconds</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="storage.js"></script>
    <script src="sidebar.js"></script>
    <script src="editor.js"></script>
    <script src="linking.js"></script>
    <script src="voice.js"></script>
    <script src="llm.js"></script>
    <script src="app.js"></script>
</body>

</html>